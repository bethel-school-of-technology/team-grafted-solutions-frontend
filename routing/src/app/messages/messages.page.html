<ion-header>
  <ion-card>
    <ion-item lines="none">
      <ion-card-title class="ion-padding"> Messages </ion-card-title>
    </ion-item>
  </ion-card>
  <app-profile1></app-profile1>
</ion-header>

<ion-content [fullscreen]="true">

  <ion-segment [(ngModel)]="selectTabs">
    <ion-segment-button value="Feed">Feed</ion-segment-button>
    <ion-segment-button value="directMessages">My Messages</ion-segment-button>
  </ion-segment>


  <ion-content class="ion-padding" *ngIf="selectTabs == 'Feed'">
    <ion-button id="open-newPost-modal" color="light"><ion-icon name="create"></ion-icon>New Post
    </ion-button>
  
    <ion-card>
      <ion-card-content>
        <ion-item lines="none">
          <ion-thumbnail slot="start">
            <ion-avatar>
            <img
              src="../../assets/icon/tom.png"/>
            </ion-avatar>
          </ion-thumbnail>
          <ion-label>
            <p>I_hateJerry200</p>
          </ion-label>
        </ion-item>
        <ion-card-title>
          <p> {{ newPost}}</p>
        </ion-card-title>
      </ion-card-content>
    </ion-card>
  </ion-content>
  
  <!-- **********NEWCHAT BUTTON************* -->
  <ion-fab slot="fixed" horizontal="end" vertical="bottom">
    <ion-fab-button (click)="newChat(item)" id="newChat">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>



<ion-card>
  <ion-card-content>
      <ion-list *ngIf="segment == 'chats' && (users) as user$">
        <ion-toolbar>
            <ion-item *ngFor="let item of user$"
              (click)="getChat(item)"
               [detail]="true"> 
               <ion-avatar slot="start">
                <img [src]="item.photo" />
               </ion-avatar>
               <ion-label>
                {{item?.name}}
                <p>
                  <ion-text>message</ion-text>
                </p>
               </ion-label>
            </ion-item>

        </ion-toolbar>
      </ion-list>
      </ion-card-content>
     </ion-card> 
     
    

  

<!--************OPEN NEWPOST MODAL ************ -->
        <!-- ******************************* -->

<ion-modal trigger="open-newPost-modal" (willDismiss)="onWillDismiss($event)">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-title slot="end">Create Post</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-item>
        <ion-textarea placeholder="Type something here" [autoGrow]="true" [(ngModel)]="post">
        </ion-textarea>
      </ion-item>

      <ion-col>
        <ion-button
        (click)="confirm()"
          type="submit"
          color="success"
          id="btn-post"
          >Post</ion-button>
          
      </ion-col>
    </ion-content>
  </ng-template>
</ion-modal>

<!--************OPEN DM MODAL ************ -->
        <!-- ******************************* -->
<ion-modal trigger="open-Dm-modal" (willDismiss)="onWillDismiss($event)">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-title slot="end">Create Post</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">

      <ion-card>
        <ion-card-content>
          <ion-item lines="none">
            <ion-thumbnail slot="start">
              <ion-chip id="chip-1">
                <ion-avatar>
                  <img
                    alt="Silhouette of a person's head"
                    src="https://ionicframework.com/docs/img/demos/avatar.svg"
                    />
                </ion-avatar>
                <ion-label>Chad Ipsum</ion-label>
              </ion-chip>
            </ion-thumbnail>
          </ion-item>
        </ion-card-content>
      </ion-card>
      <ion-card>
        <ion-card-content>
          <ion-item lines="none">
            <ion-thumbnail slot="end">
              <ion-chip id="chip-1">
                <ion-avatar>
                  <img
                    alt="Silhouette of a person's head"
                    src="https://images.unsplash.com/photo-1517231461833-7301fb461719?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2471&q=80"
                    />
                </ion-avatar>
              </ion-chip>
            </ion-thumbnail>
          </ion-item>
        </ion-card-content>
      </ion-card>
      <ion-item>
        <ion-textarea placeholder="Type something here" [autoGrow]="true" [(ngModel)]="post">
        </ion-textarea>
      </ion-item>
      <ion-col>
        <ion-button
        (click)="confirm()"
          type="submit"
          color="success"
          id="btn-post"
          >Send</ion-button>
          
        </ion-col>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!--************OPEN NEWCHAT MODAL ************ -->
        <!-- ******************************* -->

        <ion-modal trigger="newChat" [isOpen]="open_new_chat" (willDismiss)="onWillDismiss($event)">
          <ng-template>
            <ion-header>
              <ion-toolbar color="primary">
                <ion-title>New Chat</ion-title>
                  <ion-buttons slot="end">
                    <ion-button (click)="cancel()">Cancel</ion-button>
                  </ion-buttons>
              </ion-toolbar>
            </ion-header>
            <ion-content color="light" *ngIf="(users) as user$">
              <ion-list class="ion-margin-top" [style.background]="'transparent'" lines="none">
                <app-user-list
                *ngFor="let item of user$" 
                [item]="item"
                (onclick)="startChat($event)">
              </app-user-list>
              </ion-list>
            </ion-content>
          </ng-template>

        </ion-modal>

</ion-content>



